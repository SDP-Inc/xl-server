apply plugin: 'java'

sourceCompatibility = 1.8
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile (
            'org.springframework:spring-web:4.1.5.RELEASE',
            'org.springframework:spring-jdbc:4.1.5.RELEASE',

            'org.postgresql:postgresql:9.4-1201-jdbc41',

            'com.sun.jersey:jersey-core:1.19',
            'com.sun.jersey.contribs:jersey-spring:1.19',

            'com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:2.5.1',

            'org.apache.poi:poi:3.9',
            'org.apache.poi:poi-ooxml:3.11',
            'org.apache.commons:commons-lang3:3.3.2',

            'org.slf4j:slf4j-simple:1.6.1',
            'org.slf4j:jcl-over-slf4j:1.7.10',
            'ch.qos.logback:logback-classic:1.1.2'
    )
}
configurations {
    all*.exclude module: 'commons-logging'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.3'
}

task cleanLibDir(type: Delete) {
    delete fileTree(dir: "$buildDir/output/lib")
}

task copyToLib(type: Copy) {
    into "$buildDir/output/lib"
    from configurations.runtime
}

copyToLib.dependsOn cleanLibDir
build.dependsOn copyToLib